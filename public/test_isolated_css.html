<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TESTE ISOLADO - Dropdown CSS</title>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: system-ui;
            background: #1a1a1a;
            color: #fff;
            padding: 20px;
        }
        
        /* DESKTOP: Regras b√°sicas do dropdown */
        .dropdown-menu {
            position: absolute;
            left: 0;
            top: calc(100% + 8px);
            background: rgba(30, 30, 30, 0.95);
            border: 1px solid rgba(255,255,255,0.2);
            display: none; /* Escondido por padr√£o no desktop */
            flex-direction: column;
            min-width: 200px;
            z-index: 1100;
            list-style: none;
            border-radius: 4px;
        }
        
        .nav-dropdown:hover .dropdown-menu {
            display: flex; /* Mostrar no hover (desktop) */
        }
        
        /* MOBILE: Regras espec√≠ficas */
        @media (max-width: 1200px) {
            /* Esconder .nav por padr√£o */
            .nav {
                display: none;
            }
            
            /* Mostrar .nav quando .active */
            .nav.active {
                display: flex !important;
                flex-direction: column;
                background: rgba(30, 30, 30, 0.95);
                padding: 1rem;
            }
            
            /* REGRA 1: Esconder dropdown por padr√£o */
            .nav.active .dropdown-menu {
                position: static; /* Mudar para static no mobile */
                box-shadow: none;
                border: none;
                background: rgba(0, 0, 0, 0.2);
                padding-left: 1rem;
                border-radius: 0;
                display: none; /* ‚Üê ESCONDIDO por padr√£o */
            }
            
            /* REGRA 2: Mostrar dropdown quando .nav-dropdown.active */
            .nav.active .nav-dropdown.active .dropdown-menu {
                display: block !important; /* ‚Üê MOSTRAR quando .active */
            }
            
            /* Desabilitar hover no mobile */
            .nav-dropdown:hover .dropdown-menu {
                display: none !important;
            }
        }
        
        /* Estilos auxiliares */
        .nav-dropdown {
            position: relative;
            width: 100%;
        }
        
        .nav-link {
            padding: 1rem;
            color: #fff;
            text-decoration: none;
            display: block;
            cursor: pointer;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .dropdown-menu li {
            list-style: none;
        }
        
        .dropdown-menu a {
            display: block;
            padding: 0.75rem 1rem;
            color: rgba(255,255,255,0.85);
            text-decoration: none;
        }
        
        .dropdown-menu a:hover {
            background: rgba(255,255,255,0.08);
        }
        
        /* Debug panel */
        .debug {
            position: fixed;
            right: 0;
            top: 0;
            width: 350px;
            height: 100vh;
            background: rgba(0,0,0,0.95);
            padding: 20px;
            overflow-y: auto;
            border-left: 2px solid #00ff00;
            font-size: 12px;
        }
        
        button {
            background: #00ff00;
            color: #000;
            border: none;
            padding: 10px;
            margin: 5px 0;
            cursor: pointer;
            width: 100%;
            font-weight: bold;
        }
        
        .info { 
            background: rgba(255,255,255,0.1); 
            padding: 10px; 
            margin: 10px 0;
            border-radius: 4px;
            font-family: monospace;
        }
        .success { color: #00ff00; }
        .error { color: #ff0000; }
        pre {
            background: rgba(0,0,0,0.5);
            padding: 5px;
            margin: 5px 0;
            overflow-x: auto;
        }
    </style>
</head>
<body>

<h2>TESTE ISOLADO - CSS Dropdown Mobile</h2>
<p>Largura da janela: <span id="width"></span>px</p>

<!-- Estrutura do menu -->
<nav id="nav" class="nav">
    <div class="nav-dropdown" id="dropdown1">
        <a href="#" class="nav-link">Solu√ß√µes ‚ñº</a>
        <ul class="dropdown-menu" id="menu1">
            <li><a href="#">Para Governo</a></li>
            <li><a href="#">Para Empresas</a></li>
            <li><a href="#">Para Pessoas</a></li>
        </ul>
    </div>
</nav>

<!-- Debug panel -->
<div class="debug">
    <h3>üß™ TESTE ISOLADO</h3>
    <p style="color: #ffaa00;">Este teste usa CSS inline (sem arquivos externos) para isolar o problema.</p>
    
    <button onclick="step1()">1Ô∏è‚É£ ABRIR MENU (.nav.active)</button>
    <button onclick="step2()">2Ô∏è‚É£ ABRIR DROPDOWN (.nav-dropdown.active)</button>
    <button onclick="diagnose()">üî¨ DIAGNOSTICAR CSS</button>
    <button onclick="reset()">üîÑ RESETAR TUDO</button>
    
    <div id="output"></div>
</div>

<script>
const output = document.getElementById('output');
const nav = document.getElementById('nav');
const dropdown1 = document.getElementById('dropdown1');
const menu1 = document.getElementById('menu1');

function log(msg, type = '') {
    const className = type === 'success' ? 'success' : type === 'error' ? 'error' : '';
    output.innerHTML += `<div class="info ${className}">${msg}</div>`;
}

function updateWidth() {
    document.getElementById('width').textContent = window.innerWidth;
}

function step1() {
    output.innerHTML = '<h4>PASSO 1</h4>';
    nav.classList.add('active');
    log(`‚úÖ Classe adicionada: .nav.active`, 'success');
    log(`nav.classList: ${[...nav.classList].join(', ')}`, '');
    
    setTimeout(diagnose, 100);
}

function step2() {
    output.innerHTML += '<h4>PASSO 2</h4>';
    dropdown1.classList.add('active');
    log(`‚úÖ Classe adicionada: .nav-dropdown.active`, 'success');
    log(`dropdown1.classList: ${[...dropdown1.classList].join(', ')}`, '');
    
    setTimeout(diagnose, 100);
}

function diagnose() {
    output.innerHTML += '<h4>üî¨ DIAGN√ìSTICO</h4>';
    
    const navActive = nav.classList.contains('active');
    const dropdownActive = dropdown1.classList.contains('active');
    
    log(`<strong>Classes:</strong>`, '');
    log(`‚Ä¢ .nav.active: ${navActive ? '‚úÖ SIM' : '‚ùå N√ÉO'}`, navActive ? 'success' : 'error');
    log(`‚Ä¢ .nav-dropdown.active: ${dropdownActive ? '‚úÖ SIM' : '‚ùå N√ÉO'}`, dropdownActive ? 'success' : 'error');
    
    const computed = window.getComputedStyle(menu1);
    log(`<strong>CSS Computado:</strong>`, '');
    log(`<pre>display: ${computed.display}
position: ${computed.position}
width: ${computed.width}
height: ${computed.height}
top: ${computed.top}
left: ${computed.left}
z-index: ${computed.zIndex}</pre>`, '');
    
    if (computed.display === 'none') {
        log(`‚ùå PROBLEMA: display √© "none"`, 'error');
        log(`<strong>Poss√≠veis causas:</strong>`, '');
        if (!navActive) {
            log(`‚Ä¢ Falta .nav.active`, 'error');
        }
        if (!dropdownActive) {
            log(`‚Ä¢ Falta .nav-dropdown.active`, 'error');
        }
        if (navActive && dropdownActive) {
            log(`‚Ä¢ ‚ö†Ô∏è CSS n√£o est√° sendo aplicado!`, 'error');
            log(`‚Ä¢ Verificar especificidade`, 'error');
            log(`‚Ä¢ Verificar media query`, 'error');
        }
    } else if (computed.display === 'block') {
        log(`‚úÖ SUCESSO: display √© "block"!`, 'success');
        log(`‚úÖ Menu deveria estar vis√≠vel!`, 'success');
        
        const rect = menu1.getBoundingClientRect();
        if (rect.width > 0 && rect.height > 0) {
            log(`‚úÖ Dimens√µes: ${rect.width}x${rect.height}px`, 'success');
        } else {
            log(`‚ùå Dimens√µes zeradas: ${rect.width}x${rect.height}px`, 'error');
        }
    } else {
        log(`‚ö†Ô∏è Display: ${computed.display}`, '');
    }
    
    // Verificar media query
    log(`<strong>Media Query:</strong>`, '');
    if (window.matchMedia('(max-width: 1200px)').matches) {
        log(`‚úÖ Media query ativa (max-width: 1200px)`, 'success');
    } else {
        log(`‚ùå Media query N√ÉO ativa (largura > 1200px)`, 'error');
        log(`‚ö†Ô∏è Redimensione a janela ou use DevTools mobile`, '');
    }
}

function reset() {
    nav.classList.remove('active');
    dropdown1.classList.remove('active');
    output.innerHTML = '<div class="info success">‚úÖ Reset completo</div>';
}

window.addEventListener('resize', updateWidth);
updateWidth();

// Auto-start
setTimeout(() => {
    log('‚úÖ P√°gina carregada', 'success');
    log(`Largura: ${window.innerWidth}px`, '');
    log(`Mobile: ${window.innerWidth <= 1200 ? 'SIM' : 'N√ÉO'}`, 
        window.innerWidth <= 1200 ? 'success' : 'error');
}, 100);
</script>

</body>
</html>
