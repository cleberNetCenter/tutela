{
  "residuos_spa": [
    {
      "arquivo": "public/assets/js/navigation.js",
      "linha": 8,
      "codigo": "var PAGE_ROUTE_MAP = { home: '/', governo: '/governo.html', ... }",
      "categoria": "roteamento client-side",
      "evidencia": "Mapa de rotas mantido no cliente para resolver navegação por chave de página, padrão de SPA router. Em MPA puro, a navegação deveria depender de hrefs diretos. Necessidade no MPA atual: baixa (legado/refatorável).",
      "classificacao": "resíduo refatorável",
      "risco": "médio"
    },
    {
      "arquivo": "public/assets/js/navigation.js",
      "linha": 27,
      "codigo": "function navigateTo(page) { ... pages.forEach(p => p.classList.remove('active')); target.classList.add('active'); ... }",
      "categoria": "renderização dinâmica",
      "evidencia": "Função troca views no mesmo documento via classe .active sem reload, comportamento clássico de SPA (view switching). Em arquitetura MPA isso tende a ser desnecessário para páginas reais já separadas.",
      "classificacao": "resíduo removível",
      "risco": "alto"
    },
    {
      "arquivo": "public/assets/js/i18n.js",
      "linha": 131,
      "codigo": "// Método 2: Verifica se alguma das páginas legais está ativa no SPA",
      "categoria": "estado global herdado de SPA",
      "evidencia": "A lógica de detecção de página legal depende de ids internos (page-*) e classe active, acoplada ao modo SPA. No MPA, pathname/body class geralmente bastam. Necessidade no MPA atual: parcial, mas o trecho SPA é dispensável.",
      "classificacao": "resíduo refatorável",
      "risco": "médio"
    },
    {
      "arquivo": "public/assets/js/i18n.js",
      "linha": 109,
      "codigo": "const response = await fetch(`/assets/lang/${lang}.json?v=10`);",
      "categoria": "API SPA (fetch + atualização de DOM)",
      "evidencia": "Carrega JSON por fetch e aplica tradução em runtime sem nova resposta HTML do servidor. É padrão SPA-like, porém neste projeto funciona como i18n client-side e pode ser dependência ativa também em MPA.",
      "classificacao": "potencial dependência ativa",
      "risco": "baixo"
    },
    {
      "arquivo": "public/assets/js/i18n.js",
      "linha": 159,
      "codigo": "if (el.dataset.i18nHtml === 'true') { el.innerHTML = translation; }",
      "categoria": "renderização dinâmica",
      "evidencia": "Atualiza conteúdo do DOM em massa via data-i18n (innerHTML/textContent), substituindo conteúdo em tempo de execução sem reload. Em MPA isso pode continuar válido para i18n, mas mantém comportamento de UI dinâmica típico de SPA.",
      "classificacao": "potencial dependência ativa",
      "risco": "baixo"
    },
    {
      "arquivo": "public/assets/js/i18n.js",
      "linha": 491,
      "codigo": "const pageObserver = new MutationObserver(... if (target.classList.contains('page') && target.classList.contains('active')) ...)",
      "categoria": "monitoramento de navegação sem reload",
      "evidencia": "MutationObserver reexecuta traduções quando uma .page vira active (comentário explícito de SPA nas linhas 487-488). Em MPA esse observador normalmente não é necessário.",
      "classificacao": "resíduo removível",
      "risco": "alto"
    },
    {
      "arquivo": "public/en/index.html",
      "linha": 145,
      "codigo": "<a class=\"nav-link\" data-page=\"home\" href=\"#\" onclick=\"navigateTo('home'); return false;\">",
      "categoria": "navegação interceptada por JS",
      "evidencia": "Links de navegação anulam comportamento natural de anchor (href # + return false) e delegam a navegação ao JS. Isso é característico de SPA e reduz semântica de MPA.",
      "classificacao": "resíduo removível",
      "risco": "alto"
    },
    {
      "arquivo": "public/en/index.html",
      "linha": 188,
      "codigo": "<div class=\"page active\" id=\"page-home\"> ... <div class=\"page\" id=\"page-governo\"> ...",
      "categoria": "container genérico de app SPA",
      "evidencia": "Várias páginas coexistem no mesmo HTML e são ativadas por classe, padrão de shell SPA. Em MPA atual, tende a ser legado porque já existem arquivos dedicados por rota.",
      "classificacao": "resíduo removível",
      "risco": "crítico"
    },
    {
      "arquivo": "public/legal/institucional.html",
      "linha": 373,
      "codigo": "<a class=\"btn btn-primary\" href=\"/\" onclick=\"navigateTo('seguranca'); return false;\">",
      "categoria": "navegação interceptada por JS",
      "evidencia": "Página MPA ainda chama navigateTo herdado e cancela navegação normal; isso pode causar comportamento inconsistente se o script SPA não estiver carregado/ativo.",
      "classificacao": "resíduo removível",
      "risco": "alto"
    },
    {
      "arquivo": "public/index.html",
      "linha": 387,
      "codigo": "<a href=\"#\" class=\"nav-link\">...",
      "categoria": "âncora simulando navegação",
      "evidencia": "Uso de href # para toggles de menu (com preventDefault em JS) indica padrão comum em SPA. Em MPA pode ser mantido para dropdown, mas ideal é botão semântico para reduzir falso roteamento.",
      "classificacao": "resíduo refatorável",
      "risco": "baixo"
    }
  ],
  "sumario": {
    "total_residuos": 10,
    "criticos": 1,
    "altos": 4,
    "medios": 2,
    "baixos": 3
  }
}
